@model IEnumerable<MobileMart.DB.ViewModel.DisplayProductViewModel>

@{
    ViewBag.Title = "DisplayProduct";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h2>Display Product</h2>

<p>
    @Html.ActionLink("Create New", "AddProduct")
</p>
<div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
        <table class="table table-striped table-hover dataTable" id="table-editable">
            <thead>
                <tr role="row">
                    <th>
                        @Html.DisplayNameFor(model => model.Category)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Company)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Color)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.ProductName)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.ProductImage1)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.ProductImage2)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.ProductImage3)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.ProductImage4)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.ProductDetail)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.CreatedOn)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.price)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.IMEI)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.New)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.IsActive)
                    </th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Category)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Company)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Color)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ProductName)
                        </td>
                        <td><img src="@Url.Content(item.ProductImage1)" width="50" class="img-thumbnail"></td>
                        <td><img src="@Url.Content(item.ProductImage2)" width="50" class="img-thumbnail"></td>
                        <td><img src="@Url.Content(item.ProductImage3)" width="50" class="img-thumbnail"></td>
                        <td><img src="@Url.Content(item.ProductImage4)" width="50" class="img-thumbnail"></td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ProductDetail)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.CreatedOn)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.price)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.IMEI)
                        </td>
                        <td>
                            @if (item.New == true)
                            {
                                <p>Old</p>
                            }
                            else
                            {
                                <p>New</p>
                            }
                        </td>
                        <td>
                            @*@Html.DisplayFor(modelItem => item.IsActive)*@
                            @if (item.IsActive == true)
                            {
                                <label class="ToActive" id="ToActive_@item.ProductID">Active</label>
                            }
                            else
                            {
                                <label class="ToActive" id="ToActive_@item.ProductID">De-Active</label>
                            }
                        </td>

                        <td>
                            @*@Html.ActionLink(" ", "EditProduct", null ,new { id = item.ProductID , @class = "glyphicon glyphicon-edit" })*@
                            <a href="@Url.Action("EditProduct", "ShopOwner" , new { id = item.ProductID })" class="btn glyphicon glyphicon-edit"></a>
                            <a value="@item.ProductID" onclick="ActiveInactive(@item.ProductID)" class="btn glyphicon glyphicon-ok-circle"></a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
@section scripts{
    <script src="~/Scripts/jquery-1.11.js"></script>
    <script src="~/Scripts/jquery.dataTables.min.js"></script>
    <script src="~/Scripts/table_editable.js"></script>
    <script>
        function ActiveInactive(productID) {
            debugger;
            var id = productID;
            $.ajax({
                url: "@Url.Action("IsActive", "ShopOwner")",
                method: "POST",
                data: { productID: id },
                success: function (data) {
                    debugger;
                    if (data =="True") {
                        $("#ToActive_"+id).empty();
                        $("#ToActive_" + id).append("Active");
                    }
                    else{
                        $("#ToActive_" + id).empty();
                        $("#ToActive_" + id).append("De-Active");
                    }
                }
            });
        }
    </script>
}
