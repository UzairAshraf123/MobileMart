@model IEnumerable<MobileMart.DB.ViewModel.DisplayProductViewModel>

@{
    ViewBag.Title = "DisplayAllProduct";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h2>All Products</h2>

<div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
        <table class="table table-striped table-hover dataTable" id="table-editable">
            <thead>
                <tr role="row">
                    <th>@Html.DisplayNameFor(model => model.ProductName)</th>
                    <th>@Html.DisplayNameFor(model => model.Color)</th>
                    <th>@Html.DisplayNameFor(model => model.ProductImage1)</th>
                    <th>@Html.DisplayNameFor(model => model.ProductImage2)</th>
                    <th>@Html.DisplayNameFor(model => model.ProductImage3)</th>
                    <th>@Html.DisplayNameFor(model => model.ProductImage4)</th>
                    <th>@Html.DisplayNameFor(model => model.ProductDetail)</th>
                    <th>@Html.DisplayNameFor(model => model.price)</th>
                    <th>@Html.DisplayNameFor(model => model.CreatedOn)</th>
                    <th>@Html.DisplayNameFor(model => model.IsActive)</th>
                    <th class="text-center">Action</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
            {
                    <tr id='@("productdelete" + item.ProductID)'>
                        <td>
                            @Html.DisplayFor(modelItem => item.ProductName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Color)
                        </td>
                        <td>
                            <img src="@Url.Content(item.ProductImage1)" alt="Product Image" height = "100" width="125" />
                        </td>
                        <td>
                            <img src="@Url.Content(item.ProductImage2)" alt="Product Image" height="100" width="125" />
                        </td>
                        <td>
                            <img src="@Url.Content(item.ProductImage3)" alt="Product Image" height="100" width="125" />
                        </td>
                        <td>
                            <img src="@Url.Content(item.ProductImage4)" alt="Product Image" height="100" width="125" />
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ProductDetail)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.price)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.CreatedOn)
                        </td>
                        <td>
                            @if (item.IsActive)
                            {
                                <label class="ToActive" id="ToActive_@item.ProductID">Active</label>
                            }else{
                                <label class="ToActive" id="ToActive_@item.ProductID">De-Active</label>
                            }
                        </td>
                        <td>
                            @*<button value="@item.ProductID" onclick="DeleteProduct(@item.ProductID)">
                                <span><i class="glyphicon glyphicon-trash"></i></span>
                            </button>*@
                            @*<button value="@item.ProductID" onclick="ActiveInactive(@item.ProductID)">
                                <i class="glyphicon glyphicon-circle-arrow-right"></i>
                            </button>*@
                            <a class="btn glyphicon glyphicon-trash" onclick="DeleteProduct(@item.ProductID)" value="@item.ProductID"></a>
                            <a value="@item.ProductID" onclick="ActiveInactive(@item.ProductID)" class="btn glyphicon glyphicon-ok-circle"></a>
                        </td>
                        @*@Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
                        @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })*@
                    </tr>
                }
               
            </tbody>
        </table>
    </div>
</div>

@section scripts{
    <script src="~/Scripts/jquery-1.11.js"></script>
    <script src="~/Scripts/jquery.dataTables.min.js"></script>
    <script src="~/Scripts/table_editable.js"></script>
    <script>
    function DeleteProduct(productID) {
        var id = productID;
        $.ajax({
            url: "@Url.Action("Delete","Admin")",
            method: "POST",
            data: { id: id },
            success: function (data) {
                debugger;
                if (data == "True") {
                    $("#productdelete" + id).remove();
                }
            }
        });
    };
    function ActiveInactive(productID) {
    var id = productID;
    $.ajax({
        url: "@Url.Action("IsActive", "Admin")",
        method: "POST",
    data: { productID: id },
    success: function (data) {
            if (data =="True") {
                $("#ToActive_"+id).empty();
                $("#ToActive_" + id).append("Active");
            }
            else{
                $("#ToActive_" + id).empty();
                $("#ToActive_" + id).append("De-Active");
            }
        }
    });
    }
</script>

}